
## Database Incident - Mission Control Tasks Lost

**Time:** ~04:21 UTC  
**Impact:** All Mission Control tasks (17) were lost when database was reset  
**Cause:** Overnight cron work was running against `~/slideheroes-internal-tools` instead of `~/clawd/slideheroes-internal-tools`. A migration command likely ran against the wrong path or triggered a fresh db initialization.

**Resolution:**
1. Restored from 04:00 UTC hourly backup - all 17 tasks recovered
2. Removed duplicate repo at `~/slideheroes-internal-tools` to prevent confusion
3. Added pre-deploy backup step to deploy.sh for extra safety

**Lessons:**
- Always use the canonical path: `~/clawd/slideheroes-internal-tools`
- Hourly backups saved the day - keep backup retention adequate
- Be careful with prisma migrate commands - they can wipe data

---

## Second Brain Databases Created (13:51 UTC)

Built the foundational Notion Second Brain structure under "Personal Home":

**Resources Database**
- ID: `c81f483f-1f70-4b10-9b38-0eca92924929`
- Data Source ID: `afacc796-e7c9-4076-9085-1c25e3fd4b7b`
- URL: https://www.notion.so/c81f483f1f704b109b380eca92924929
- Properties: Name, Type (Article/Video/Podcast/Book/Course/Thread), Author, URL, Date Consumed, Tags, Summary

**Best Practices Database**
- ID: `18d2323e-f8ce-458e-9231-0097b4785dce`
- URL: https://www.notion.so/18d2323ef8ce458e92310097b4785dce
- Properties: Practice, Domain (Sales/Product/Marketing/Operations/Leadership/Technical/Personal), Source (→ Resources), Context, Implementation, Applied, Applied Notes, Tags, Date Captured, Rating
- Linked to Resources via relation property

**Integration:** sophie-openclaw

## YouTube Transcript Tool & #capture Monitoring (13:56 UTC)

**YouTube Transcripts:**
- Installed `youtube-transcript-api` (v1.2.4)
- Helper script: `~/clawd/scripts/get-youtube-transcript.py`
- Usage: `python3 ~/clawd/scripts/get-youtube-transcript.py <url_or_video_id>`

**#capture Monitoring:**
- Added to HEARTBEAT.md — will check channel each heartbeat
- Full extraction pipeline documented in heartbeat
- Ready for end-to-end testing

## Mission Control Status Refactor (afternoon)

### Problem Identified
- Morning Brief was missing LLM model usage section (Task #18)
- Task was stuck in "inbox" status — invisible to nightly work job
- Root cause: terminology mismatch between DB statuses and kanban columns
- Old system had 5 statuses: `inbox`, `up_next`, `in_progress`, `in_review`, `done`
- Nightly job queried `status=up_next` but API defaulted to `status=inbox`

### Solution Implemented
Simplified to 4 statuses matching kanban columns:
| Status | Column Label |
|--------|--------------|
| `backlog` | Backlog |
| `in_progress` | In Progress |
| `in_review` | Review |
| `done` | Done |

### Changes Made
1. **Code refactor** (GPT sub-agent):
   - Updated TypeScript types in `KanbanClient.tsx` and `tasks-client.tsx`
   - Updated API allowed statuses and default in `route.ts`
   - Updated Prisma schema enum
   - Created migration with auto-conversion: `inbox`/`up_next` → `backlog`
   - Commit: `29a7fda` — "Simplify task statuses to 4-column kanban"

2. **Cron job updates**:
   - Morning Brief: Added section 6 for yesterday's LLM model usage (`clawdbot usage --date yesterday --json`)
   - Nightly Sophie Work: Changed query from `status=up_next` to `status=backlog`

3. **Deployed** to production (`internal-tools.service` restarted)

4. **Task #18 marked done** — model usage now in Morning Brief

### Key Lesson
When creating tasks via API, ensure status matches what work queues query for. New default is `backlog` — tasks will be visible immediately.
