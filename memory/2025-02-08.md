# 2025-02-08

## Decision: No New Coding Tools
Mike said no to adding new coding tools to the server environment. Two reasons:
1. **Environment parity** â€” doesn't want the server dev environment to diverge too far from his local dev setup
2. **Cost** â€” wants to steer away from more paid tools

This is a standing preference going forward.

## Immediate Fixes Completed
From the tooling audit, completed the two immediate fixes:
1. **Perplexity env var** â€” Added `PERPLEXITY_API_KEY` to `~/.clawdbot/.env` so sub-agents inherit it (was only in project's `.ai/.env`)
2. **Context7 scripts** â€” `chmod +x` on `.ai/bin/context7-get-context` and `.ai/bin/context7-search`
3. ~~Add Edit to sub-agent tools~~ â€” was already done

## Prioritized Task List (from audit + research)
- ðŸ”´ Items 1-3: Done (immediate fixes)
- Items 4-9: Deprioritized. Focus shifted to coding sub-agent tooling instead.

## Coding Sub-Agent Strategy (Decision & Implementation)
Mike's direction:
1. **Use Codex (ChatGPT/GPT-5.2)** as primary coding sub-agent, not Claude Code
2. **No direct API usage** â€” use existing subscriptions (currently API key auth working, OAuth preferred)
3. **Alpha Orchestrator is Mike-only** â€” reserved for local use, do not run on server
4. **No new paid tools** â€” keep environment aligned with Mike's local setup

### What was created:
- **`~/.codex/config.toml`** â€” model=gpt-5.2-codex, workspace-write sandbox, on-failure approval
- **`~/2025slideheroes-sophie/AGENTS.md`** â€” Full project context ported from CLAUDE.md (~9KB, covers tech stack, conventions, commands, DB workflow, commit format, research tools)
- **`.ai/bin/codex/implement`** â€” Takes GitHub issue #, fetches plan, implements, validates, commits, reports
- **`.ai/bin/codex/codecheck`** â€” Runs typecheck + lint + format with auto-fix
- **`.ai/bin/codex/commit`** â€” Creates properly formatted conventional commits with agent traceability
- **`.ai/bin/codex/review`** â€” Reviews implementation against GitHub issue spec
- All scripts tested â€” Codex confirmed loading AGENTS.md and project context

### How to use from Clawdbot:
```bash
# Spawn Codex for implementation
exec pty:true workdir:~/2025slideheroes-sophie background:true command:".ai/bin/codex/implement 123"

# Or direct codex exec
exec pty:true workdir:~/2025slideheroes-sophie command:"codex exec --full-auto 'task description'"
```

### Note on auth:
- Currently authenticated via API key (`echo $OPENAI_API_KEY | codex login --with-api-key`)
- Mike prefers OAuth via ChatGPT subscription â€” may need `codex login --device-auth` to switch
- Clawdbot gateway has `openai-codex:default` profile with OAuth mode configured
