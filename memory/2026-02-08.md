# 2026-02-08

## ⚠️ Morning Briefing Bug — 3rd Day in a Row
Mike flagged that morning briefing STILL has two bugs despite "fixing" them yesterday:
1. **Feedback links still use localhost:3001** — Don't work from Discord
2. **Calendar section still missing** — Was marked REQUIRED but kept getting skipped

**Root cause:** The fixes were documented in ROUTINES.md but the briefing generation (during heartbeat) doesn't reliably follow the routine. Context compaction between sessions means the fix context is lost.

**Fix applied:** Added a prominent PRE-FLIGHT CHECKLIST at the top of the Morning Briefing section in ROUTINES.md, plus a warning in HEARTBEAT.md. Made it impossible to miss.

**Lesson:** Writing the fix in a routine file isn't enough if the routine is long and the agent skims it. Put critical constraints in ALL-CAPS at the TOP, not buried in sub-sections.

---

## Nightly Initiative: Insights Dashboard ✅

**What:** Built a full analytics/insights dashboard for Mission Control at `/insights`

### Components
- **API endpoint** (`/api/v1/insights`): Aggregates data across all MC tables — weekly time series, task status/priority/board distributions, practice domain breakdown, activity heatmap (56 days), weekly highlights
- **Dashboard page** (`/insights`): Interactive page with recharts library:
  - 5 summary metric cards (tasks, practices, resources, debates, activities)
  - Weekly Activity area chart (3 series: tasks completed, practices, activities)
  - Tasks by Status donut chart
  - Practices by Domain horizontal bar chart  
  - Tasks by Board stacked bar chart
  - Activity Heatmap (GitHub-style contribution grid)
  - Week range selector (4/8/12/24 weeks)
  - Loading skeletons, error handling, refresh
- **Nav tab** added: Insights with BarChart3 icon, after Resources

### Process
1. Spawned GPT-5.2 sub-agent with detailed spec
2. Sub-agent created API + page + installed recharts (12 min)
3. Sophie reviewed, fixed TypeScript errors (Prisma groupBy orderBy type, eslint `any`), updated pnpm lockfile
4. Merged to main, CI passed, auto-deployed

### Commits
- `749f587` feat(insights): add analytics dashboard with charts and weekly trends
- `34d3dcd` fix: update pnpm lockfile for recharts dependency

### Live Data Verification
- API returns real data: 61 tasks (59 done), 22 practices across 7 domains, 12 debates, 117 activities
- Top domain: Marketing (10 practices)
- Production deployed and verified at internal.slideheroes.com/insights
