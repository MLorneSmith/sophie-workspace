# 2026-02-02 — Mission Control Improvements

## Key Work Done

### Mission Control UI Updates (slideheroes-internal-tools)
- **Task edit/delete:** Added modal that opens when clicking task cards. Edit button (pencil icon) appears on hover.
- **Project card clickable:** Fixed z-index issue so entire card is clickable, not just the top portion.
- **Dropdown styling:** Changed project dropdown to dark theme (`bg-[#141b2d]`).
- **"All Projects" option:** Added ability to view all tasks across projects.
- **Kanban columns:** Removed "Recurring" column, added "Done" column. Now: Backlog → In Progress → Review → Done.
- **Header nav reordered:** Projects → Tasks → Cron → Memory → Captures → Docs
- **New Cron tab:** Shows all 8 recurring cron jobs with schedule, last run, next run, status. Reads from `~/.clawdbot/cron/jobs.json`.

### Activity Tracking (Option C - Both git hooks + Clawdbot logging)
- **Cloudflare Access service token:** Mike created `sophie-activity-bot` token for API access.
- **Credentials stored:** `~/clawd/slideheroes-internal-tools/app/.env.local` has `CF_ACCESS_CLIENT_ID` and `CF_ACCESS_CLIENT_SECRET`.
- **Git post-commit hook:** `.husky/post-commit` auto-logs commits to Mission Control activity feed.
- **Helper script:** `~/clawd/scripts/log-activity.sh <action> <summary> [details]` for manual activity logging.
- **Actions to use:** `task_complete`, `feature_shipped`, `research`, `fix`, `commit`.

### CI/CD Notes
- **CI workflow:** Needed `DATABASE_URL` env var added to build step (Mike updated `.github/workflows/ci.yml`).
- **Deployment:** Site is hosted on EC2, not Vercel. Deploy via: `cd ~/clawd/slideheroes-internal-tools/app && git pull && pnpm build && sudo systemctl restart internal-tools`.
- **Service:** `internal-tools.service` runs on port 3001.

## Credentials (for reference)
- CF Access Client ID: `37e71ec834f3d10aef5e4c224f39c46a.access`
- CF Access Client Secret: stored in `.env.local`
- Mission Control URL: `https://internal.slideheroes.com`

## Repo Locations
- GitHub clone for pushes: `~/slideheroes-internal-tools`
- Deployed copy: `~/clawd/slideheroes-internal-tools`
- Always pull in deployed copy and rebuild after pushing changes.

## Best Practices Extraction System (evening)

Completed Task #14 — designed system for extracting best practices from content Mike consumes.

**Deliverable:** `/home/ubuntu/clawd/deliverables/best-practices-extraction-recommendation.md`

**Capture Channel Setup:**
- Created Discord **#capture** channel (id: `1468019433854210259`)
- Mike shares links from phone → Sophie extracts practices → adds to Notion
- Supported sources: Substack, YouTube, Reddit
- Documentation: `docs/capture-process.md`

**Workflow:**
1. Mike finds valuable content on phone (Substack/YouTube/Reddit apps)
2. Shares link to #capture via Share → Discord
3. Sophie detects the link, fetches content:
   - Substack: article text
   - YouTube: transcript via API
   - Reddit: post + comments
4. LLM extracts 3-7 actionable best practices per piece
5. Practices added to Notion Best Practices database
6. Sophie caches relevant practices for active project work

**Task #18** (model usage breakdown for Morning Brief) added to backlog.

---

## Evening Session (10:50pm - 12:45am)

### #capture Channel Created
- Discord channel id: `1468019433854210259`
- Purpose: Mike shares links from mobile (Substack, YouTube, Reddit) → Sophie extracts best practices
- Documentation: `docs/capture-process.md`

### Model Configuration Updates
- **Heartbeat model** → Changed to Claude 3.5 Haiku (`anthropic/claude-3-5-haiku-latest`) to reduce costs
- **GLM 4.7** → Confirmed working with API key auth; tested web_search successfully
- **Web search preference** → Added to USER.md: spawn GLM sub-agents for search-heavy research tasks

### Todoist Tasks Rescheduled
- Mike's 4-week MVP roadmap had 6 tasks on weekends
- Rescheduled all to weekdays (Sat→Fri, Sun→Mon)
- **New rule in USER.md**: No weekend work tasks (SlideHeroes); personal tasks OK on weekends

### EC2 Cost Tracking (in progress)
- Mike wants daily EC2 cost in Morning Brief
- Created: `scripts/get-ec2-daily-cost.sh` (queries AWS Cost Explorer)
- Created: `docs/ec2-cost-tracking-setup.md` (setup guide)
- **Todoist task for Mike** (Feb 3): Create IAM user `sophie-cost-reader`, configure AWS CLI
- **MC Task #19**: Integrate EC2 cost into Morning Brief (after AWS configured)

### Voice Chat Discussion
- Mike asked about GPT-4o Realtime voice chat
- Telegram bots can't do real-time voice (Bot API limitation)
- Would need Telnyx/Twilio for phone-based real-time voice
- **Not a priority** - Mike will revisit later

---

## CI/CD Pipeline Setup (afternoon)

Worked with Mike to set up end-to-end CI/CD for slideheroes-internal-tools:

1. **Problem:** CI ran in GitHub but deployment was manual/disconnected
2. **Solution:** Webhook-based auto-deploy
   - GitHub webhook triggers on CI success
   - `/api/deploy` endpoint validates signature, runs `deploy.sh`
   - Deploy script pulls, builds, restarts service, notifies Discord

3. **UI Debugging:** Added `dev-server.sh` for on-demand localhost dev server

4. **Documentation:**
   - Updated MEMORY.md with setup details
   - Created DEPLOYMENT.md in repo with full technical docs

Key files: `deploy.sh`, `dev-server.sh`, `/api/deploy/route.ts`, `.github/workflows/ci.yml`
